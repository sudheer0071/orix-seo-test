import{a as m,j as e}from"./index-BYROHmHR.js";import{v as F,f as k}from"./Layout-B7AtAuba.js";const D=({locations:g=[],departments:v=[],selectedDepartment:L="",selectedLocation:S=""})=>{var j;const[r,p]=m.useState({name:"",email:"",phone:"",preferedLocation:"",interestedservices:"",upload_files:null}),[i,d]=m.useState({}),{submitForm:N,loading:u,message:o}=F(),[x,y]=m.useState(!1),f=(t,s)=>{const a={};switch(t){case"name":s.trim()?/^[a-zA-Z\s]+$/.test(s)||(a.name="Only letters and spaces allowed"):a.name="Full Name is required";break;case"email":s.trim()?/\S+@\S+\.\S+/.test(s)||(a.email="Invalid email format"):a.email="Email is required";break;case"phone":s.trim()?/^\d{7,15}$/.test(s)||(a.phone="Phone must be 7â€“15 digits"):a.phone="Phone number is required";break;case"preferedLocation":s||(a.preferedLocation="Location is required");break;case"interestedservices":s||(a.interestedservices="Department is required");break;case"upload_files":s||(a.upload_files="Resume is required");break}return a},c=t=>{const{name:s,value:a}=t.target;let l=a;s==="name"&&(l=a.replace(/[^a-zA-Z\s]/g,"")),s==="phone"&&(l=a.replace(/\D/g,"").slice(0,10)),p(h=>({...h,[s]:l}));const n=f(s,l);d(h=>{const b={...h,...n};return n[s]||delete b[s],b})},E=t=>{const s=t.target.files[0];p(l=>({...l,upload_files:s}));const a=f("upload_files",s);d(l=>{const n={...l,...a};return a.upload_files||delete n.upload_files,n})},_=t=>{t.preventDefault();const s={};if(Object.entries(r).forEach(([l,n])=>{Object.assign(s,f(l,n))}),Object.keys(s).length>0){d(s);return}const a=new FormData;Object.entries(r).forEach(([l,n])=>{a.append(l,n)}),a.append("type","careerRequest"),N(a,()=>{p({name:"",email:"",phone:"",preferedLocation:"",interestedservices:"",upload_files:null}),d({})},()=>{})};return m.useEffect(()=>{const t=Object.entries(r).every(([a,l])=>a==="upload_files"?!!l:l.trim()!==""),s=Object.keys(i).length===0;y(t&&s)},[r,i]),e.jsxs(k.form,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.6,delay:.3,ease:"easeIn"},onSubmit:_,encType:"multipart/form-data",children:[e.jsxs("div",{className:"row g-4 pt-4",children:[e.jsxs("div",{className:"col-md-6 mt-3",children:[e.jsx("input",{type:"text",className:"form-control",name:"name",placeholder:"Full Name*",value:r.name,onChange:c}),i.name&&e.jsx("small",{className:"text-danger",children:i.name})]}),e.jsxs("div",{className:"col-md-6 mt-3",children:[e.jsx("input",{type:"email",className:"form-control",name:"email",placeholder:"Email ID*",value:r.email,onChange:c}),i.email&&e.jsx("small",{className:"text-danger",children:i.email})]}),e.jsxs("div",{className:"col-md-6 mt-3",children:[e.jsx("input",{type:"text",className:"form-control",name:"phone",placeholder:"Phone Number*",value:r.phone,onChange:c}),i.phone&&e.jsx("small",{className:"text-danger",children:i.phone})]}),e.jsxs("div",{className:"col-md-6 mt-3",children:[e.jsxs("select",{className:"form-select",name:"preferedLocation",value:r.preferedLocation,onChange:c,children:[e.jsx("option",{value:"",disabled:!0,children:"Preferred Location*"}),g.map(t=>e.jsx("option",{value:t,children:t},t))]}),i.preferedLocation&&e.jsx("small",{className:"text-danger",children:i.preferedLocation})]}),e.jsxs("div",{className:"col-md-6 mt-3",children:[e.jsxs("select",{className:"form-select",name:"interestedservices",value:r.interestedservices,onChange:c,children:[e.jsx("option",{value:"",disabled:!0,children:"Interested Department*"}),v.map(t=>e.jsx("option",{value:t,children:t},t))]}),i.interestedservices&&e.jsx("small",{className:"text-danger",children:i.interestedservices})]}),e.jsxs("div",{className:"col-md-6 mt-3",children:[e.jsxs("div",{className:"upload-box upoad-icon",onClick:()=>document.getElementById("resumeUpload").click(),style:{cursor:"pointer"},children:[((j=r.upload_files)==null?void 0:j.name)||"Upload your resume*",e.jsx("br",{})]}),e.jsx("input",{type:"file",id:"resumeUpload",name:"upload_files",className:"d-none",onChange:E,accept:".pdf,.doc,.docx"}),i.upload_files&&e.jsx("small",{className:"text-danger",children:i.upload_files})]})]}),e.jsx("div",{className:"mt-4 col-12 col-md-6 col-xl-4",children:e.jsx("button",{type:"submit",className:`submit-btn w-100 px-md-5 ${u||!x&&o.type!=="success"?"disabled":""}`,disabled:u||!x&&o.type!=="success",children:u?"Submitting...":o.type==="success"?e.jsx("i",{className:"fa-sharp fa-solid fa-check fa-xl",style:{color:"#fafafa"}}):"Submit Application"})}),o.text&&e.jsx("div",{className:`mt-2 small fw-bold ${o.type==="success"?"text-success":"text-danger"}`,children:o.text})]})};export{D as F};
