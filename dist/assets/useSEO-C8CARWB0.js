import{u as y,a as g}from"./index-BYROHmHR.js";import{p as b,B as w}from"./Layout-B7AtAuba.js";const I="https://orix.betaapi.webenza.net/api/cmspages/getmetadetails",O=w;let m=null,_=null;const E=60*1e3,S={"/home":"homepage","/about-us":"aboutpage","/contact-us":"contactpage","/luxury-car-rental":"goluxepage","/corporate-car-rental":"carrentalpage","/business-transportation-solution":"btspage","/career":"career","/careerdetail":"careerdetailpage","/news":"newspage","/blog":"blogpage","/mobility-solutions":"mobility-solution","/sales-notice":"salespage","/city":"citymumbai","/city/mumbai":"citymumbai","/city/delhi":"citydelhi","/city/chennai":"citychennai","/city/bangalore":"citybanglore","/leasing/equipment-lease":"equipmentlease","/wedding":"weddingpage","/mice":"micepage","/electrix":"electrixpage","/leasing-solutions":"leasingoverview","/lending-solutions":"lendingoverview","/fleet-management-services":"fleetmanagementservices","/leasing/employee-transportation-solutions":"etspage","/leasing/enterprise-employee-purchase-program":"eepppage","/leasing/corporate-car-lease":"corpcarlease","/leasing/supido":"supidopage","/business-transportation/fleet-management-solutions":"fleetmanagement","/privacy-policy":"privacypage","/disclaimer":"disclaimerpage","/vendor-payment-issues":"vendorpaymentpage","/feedback":"feedbackpage","/grievances":"grievancespage","/mercedes":"mercpage","/toyota":"toyotapage","/audi":"audipage","/bmw":"bmwpage","/lending/business-loan":"businessloan","/lending/working-capital":"workingloan","/lending/machinery-loan":"machineryloan","/special-occasions":"special-occasions","/senior-officer-transport":"seniour-officer","/airport-transfer":"final-airport"};async function A(){try{const e=Date.now();if(m&&_&&e-_<E)return m;const a=await fetch(I);if(!a.ok)throw new Error(`API failed: ${a.status}`);const c=await a.json(),l={};return c.data.forEach(n=>{l[n.cms_page]=n}),m=l,_=e,l}catch(e){return console.error("Failed to fetch SEO data:",e),m||{}}}async function k(e){var a,c,l,n,p,d;try{const r=await b.get(O,{params:{alias:e}});if(r.status!==200||!((a=r.data)!=null&&a.success))throw new Error(((c=r==null?void 0:r.data)==null?void 0:c.message)||"Request failed");const t=(n=(l=r.data)==null?void 0:l.data)==null?void 0:n.data;return t?{meta_title:t.meta_title||t.title||"ORIX India Blog",meta_description:t.meta_description||(t.content?t.content.replace(/<[^>]*>/g,"").substring(0,160)+"...":"Read our latest blog on ORIX India"),meta_keywords:t.meta_keywords||`${t.title}, ORIX India, blog`,meta_robots:t.meta_robots||"index, follow",og_title:t.meta_title||t.title,og_description:t.meta_description||((p=t.content)==null?void 0:p.replace(/<[^>]*>/g,"").substring(0,160)),og_image:t.original_image||null,twitter_title:t.meta_title||t.title,twitter_description:t.meta_description||((d=t.content)==null?void 0:d.replace(/<[^>]*>/g,"").substring(0,160)),canonical_url:`https://orix.in/blog/${e}`,article_published_time:t.createdAt||t.blogdate||t.created_at,article_modified_time:t.updatedAt||t.updated_at,article_author:t.author||"ORIX India",article_section:t.category||"Blog"}:null}catch(r){return console.error("Failed to fetch blog detail for SEO:",r),null}}function f(e){e&&(document.title=e)}function i(e,a,c=!1){if(!a)return;const l=c?`meta[property="${e}"]`:`meta[name="${e}"]`;let n=document.querySelector(l);n?n.setAttribute("content",a):(n=document.createElement("meta"),c?n.setAttribute("property",e):n.setAttribute("name",e),n.setAttribute("content",a),document.head.appendChild(n))}function v(e){if(!e)return;let a=document.querySelector('link[rel="canonical"]');a?a.setAttribute("href",e):(a=document.createElement("link"),a.setAttribute("rel","canonical"),a.setAttribute("href",e),document.head.appendChild(a))}function h(e){if(!e)return;const a=document.querySelector('script[type="application/ld+json"]');a&&a.remove();const c=document.createElement("script");c.type="application/ld+json",c.textContent=e,document.head.appendChild(c)}function x(e){const a={"@context":"https://schema.org","@type":"BlogPosting",headline:e.meta_title,description:e.meta_description,author:{"@type":"Organization",name:e.article_author||"ORIX India"},publisher:{"@type":"Organization",name:"ORIX India",logo:{"@type":"ImageObject",url:"https://orix.in/logo.png"}},datePublished:e.article_published_time,dateModified:e.article_modified_time,mainEntityOfPage:{"@type":"WebPage","@id":e.canonical_url}};return e.og_image&&(a.image={"@type":"ImageObject",url:e.og_image}),JSON.stringify(a,null,2)}function $(e=null){const a=y(),[c,l]=g.useState(!0),[n,p]=g.useState(null);return g.useEffect(()=>{async function d(){l(!0),p(null);try{const r=a.pathname,t=r.match(/^\/blog\/(.+)$/);if(t){const u=t[1];console.log(u,"slug");const o=await k(u);if(o){f(o.meta_title),i("description",o.meta_description),i("keywords",o.meta_keywords),i("robots",o.meta_robots),v(o.canonical_url),i("og:title",o.og_title,!0),i("og:description",o.og_description,!0),i("og:type","article",!0),i("og:url",o.canonical_url,!0),o.og_image&&i("og:image",o.og_image,!0),i("article:published_time",o.article_published_time,!0),i("article:modified_time",o.article_modified_time,!0),i("article:author",o.article_author,!0),i("article:section",o.article_section,!0),i("twitter:card","summary_large_image"),i("twitter:title",o.twitter_title),i("twitter:description",o.twitter_description),o.og_image&&i("twitter:image",o.og_image);const s=x(o);h(s),console.log(`Blog SEO updated for ${r}:`,{title:o.meta_title,description:o.meta_description})}else console.warn(`No blog data found for slug: ${u}`)}else{const u=e||S[r];if(!u){console.warn(`No CMS page mapping found for route: ${r}`),l(!1);return}const s=(await A())[u];s?(f(s.meta_title),i("description",s.meta_description),i("keywords",s.meta_keywords),i("robots",s.meta_robots),i("og:title",s.meta_title,!0),i("og:description",s.meta_description,!0),i("og:type","website",!0),i("og:url",window.location.href,!0),i("twitter:card","summary_large_image"),i("twitter:title",s.meta_title),i("twitter:description",s.meta_description),s.meta_schema&&h(s.meta_schema),console.log(`SEO updated for ${r} (${u}):`,{title:s.meta_title,description:s.meta_description})):console.warn(`No SEO data found for CMS page: ${u}`)}}catch(r){console.error("Error updating SEO:",r),p(r.message)}finally{l(!1)}}d()},[a.pathname,e]),{loading:c,error:n}}export{$ as u};
